<p id="notice"><%= notice %></p>

  <div>
    <div class="user-item-cards p-2" data-paymentmodal-target="cards">
    <%= @auction.item.name %>
    <div class="user-item-card-category p-2 bg-light">
      <div class="user-item-name mx-auto">
      <% if @auction.item.photo.attached? %>
      <%= cl_image_tag @auction.item.photo.key, height: 300, width: 400, crop: :fill %>
      <% end %>
        <%= image_tag "https://source.unsplash.com/random/300Ã—300", class:"img-fluid", style:"height:300px;width:400% crop: :fill"%>
      <ul class="pl-0 pt-1" style="list-style-type:none;size">
        <li>Start time: <%= @auction.start_time %></li>
        <li>End Time: <%=  @auction.end_time %></li>
        <li> Item: <%= @auction.item_id %></li>
        <li>Minimum Bid: <%= @auction.minimum_bid %></li>
         <li id="demo">
<script>
// Set the date we're counting down to
var countDownDate = new Date("<%=@auction.end_time%>").getTime();

// Update the count down every 1 second
var x = setInterval(function() {

  // Get today's date and time
  var now = new Date().getTime();

  // Find the distance between now and the count down date
  var distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  // Output the result in an element with id="demo"
  document.getElementById("demo").innerHTML = days + "d " + hours + "h "
  + minutes + "m " + seconds + "s ";

  // If the count down is over, write some text
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("demo").innerHTML = "EXPIRED";
  }
}, 1000);
</script>
      </ul>
      </div>
    </div>
  </div>
<div data-controller="bidmodal">
  <%= render "bidform" %>
</div>
      </div>
<table>

  <table class="fixed_headers">
  <thead>
    <tr>
      <th style>Bid Rankings</th>
      <th>User Name</th>
      <th>Bid Amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <%  sortedbids = @bids.sort_by { |hsh| -hsh[:bid_amount] }%>
      <%  sortedbids.each_with_index do |bid, index| %>
      <td><%= index+1%></td>
      <td><%= User.find(id=bid.buyer_id).username%></td>
      <td><%= bid.bid_amount %></td>
      </tr>
      <% end %>
  </tbody>
</table>


<%= link_to 'Edit', edit_auction_path(@auction) %> |
<%= link_to 'Back', auctions_path %>
